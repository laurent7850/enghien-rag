services:
  web:
    image: ghcr.io/laurent7850/enghien-rag:5d2a5fd
    container_name: enghien-web
    restart: always
    environment:
      - HOSTNAME=0.0.0.0
      - DATABASE_URL=${DATABASE_URL}
      - OPENROUTER_API_KEY=${OPENROUTER_API_KEY}
      - SITE_URL=https://enghien.srv767464.hstgr.cloud
      - NODE_ENV=production
      - PORT=3000
    labels:
      - traefik.enable=true
      - traefik.http.routers.enghien.rule=Host(`enghien.srv767464.hstgr.cloud`)
      - traefik.http.routers.enghien.entrypoints=websecure
      - traefik.http.routers.enghien.tls.certresolver=letsencrypt
      - traefik.http.services.enghien.loadbalancer.server.port=3000
    networks:
      - root_default
      - enghien-rag_default

networks:
  root_default:
    external: true
  enghien-rag_default:
    external: true
